<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
	<link rel="stylesheet" th:href="@{/css/Setting.css}">
    <link rel="stylesheet" th:href="@{/css/Main.css}">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
    <!-- after merge, replace sheetlink  -->
    <!-- th확인하고 나중에 링크 바꿔야함 -->
    
<body>
    
    <div th:replace="~{/Fragment/header :: headerFragment}"></div>

    <!-- img slider start -->
    <section class="img-slider">
        <div class="slider">
            <div class="slides">
                <!-- radio btn start -->
                <input type="radio" name="radio-btn" id="radio1">
                <input type="radio" name="radio-btn" id="radio2">
                <input type="radio" name="radio-btn" id="radio3">
                <input type="radio" name="radio-btn" id="radio4">
                <input type="radio" name="radio-btn" id="radio5">
                <!-- radio btn end -->
                <!-- slide img start -->
                <div class="slide first">
                    <a href="#">
                        <img th:src="@{/images/headerSlideImgExam/header-img1.png}" alt="">
                    </a>
                </div>
                <div class="slide">
                    <a href="#">
                        <img th:src="@{/images/headerSlideImgExam/header-img2.png}" alt="">
                    </a>
                </div>
                <div class="slide">
                    <a href="#">
                        <img th:src="@{/images/headerSlideImgExam/header-img3.png}" alt="">
                    </a>
                </div>
                <div class="slide">
                    <a href="#">
                        <img th:src="@{/images/headerSlideImgExam/header-img4.png}" alt="">
                    </a>
                </div>
                <div class="slide">
                    <a href="#">
                        <img th:src="@{/images/headerSlideImgExam/header-img5.png}" alt="">
                    </a>
                </div>
                <!-- slide img end -->
                <!-- automatic navigation start -->
                <div class="navigation-auto">
                    <div class="auto-btn1"></div>
                    <div class="auto-btn2"></div>
                    <div class="auto-btn3"></div>
                    <div class="auto-btn4"></div>
                    <div class="auto-btn5"></div>
                </div>
                <!-- automatic navigation end -->
            </div>
            <!-- manual navigation start -->
            <div class="navigation-manual">
                <label for="radio1" class="manual-btn"></label>
                <label for="radio2" class="manual-btn"></label>
                <label for="radio3" class="manual-btn"></label>
                <label for="radio4" class="manual-btn"></label>
                <label for="radio5" class="manual-btn"></label>
            </div>
            <!-- manual navigation end -->
        </div>
        <!-- img slider end -->

        <!-- 이전 다음 버튼 구현 필요? -->
        <!-- 자동으로 움직이는 것에 대한 좀 더 UX적인 구현 필요
        ex) 자동 슬라이드 2번째 구간때 5번째 점을 누르면 그 다음 자동 슬라이드가 3번째 구간으로 감 -->

    </section>
    
    
    <!-- editors pick content -->
    <section class="editors-pick">
        <div class="bordelist">
            <div>에디터의 PICK</div>
            <div class="bordelist-explain">
                저희가 지금 가장 추천하는 행사를 만나보세요!
            </div>
        </div>
        
        <div class="readmore">
            <a href="#">
                <span>더 많은 행사 보기 </span><i class="fa-solid fa-angle-right"></i>
            </a>
        </div>
    </section>


    <!-- scroll content -->
    <section class="scroll-content">
        <div class="wrapper">
            <!-- <i class="fa-solid fa-angle-left"></i> -->
            <!-- 게시물을 클릭했을때 보내주는 요소가 없어서 a태그 추가함 -20240414 허서진 -->
            <div class="carousel">
                
            
				<div class="carousel-box" th:each="post, index: ${postsByViews}">
					<a th:href="@{|/board/${post.categoryID}/${post.postID}|}">
				
	                	<input type="hidden" th:value="${post.postID}">
	                	<input type="hidden" id="categoryID" th:value="${post.categoryID}" />
						<img th:if="${imageLinkView != null and imageLinkView.size() > index.index}" th:src="${imageLinkView[index.index]}" alt="이미지">
						<div th:text="${post.eventStart}"></div>
	                    <div class="title"><a th:href="@{|/board/${categoryID}/${post.postID}|}" th:text="${post.postName}"></a></div>
					</a>
                </div>   

            </div>
        </div>
    </section>

    <div class="empty"></div>

    <!-- New project content -->
    <section class="editors-pick">
        <div class="bordelist">
            <div>당신의 참가를 기다리는 NEW 행사</div>
            <div class="bordelist-explain">
                이번주 새로 개설된 행사를 만나보세요!
            </div>
        </div>
        
        <div class="readmore">
            <a href="#">
                <span>더 많은 행사 보기 </span><i class="fa-solid fa-angle-right"></i>
            </a>
        </div>
    </section>

    <!-- scroll content -->
    <section class="scroll-content">
        <div class="wrapper">
            <div class="carousel">
				<div class="carousel-box" th:each="post, index: ${postsByLatest}">
					<a th:href="@{|/board/${post.categoryID}/${post.postID}|}">
				
	                	<input type="hidden" th:value="${post.postID}">
	                	<input type="hidden" id="categoryID" th:value="${post.categoryID}" />
						<img th:if="${imageLinkLate != null and imageLinkLate.size() > index.index}" th:src="${imageLinkLate[index.index]}" alt="이미지">
						<div th:text="${post.eventStart}"></div>
	                    <div class="title"><a th:href="@{|/board/${categoryID}/${post.postID}|}" th:text="${post.postName}"></a></div>
					</a>
                </div>   

            </div>
        </div>
    </section>

    <div class="empty"></div>

    <!-- Popular project content -->
    <section class="editors-pick">
        <div class="bordelist">
            <div>마감 임박</div>
            <div class="bordelist-explain">
                현재 마감일이 가까운 행사와 프로젝트를 만나보세요!
            </div>
        </div>
        
        <div class="readmore">
            <a href="#">
                <span>더 많은 행사 보기 </span><i class="fa-solid fa-angle-right"></i>
            </a>
        </div>
    </section>

    <!-- scroll content -->
    <section class="scroll-content">
        <div class="wrapper">
            <div class="carousel">
				<div class="carousel-box" th:each="post, index: ${postsByEnd}">
					<a th:href="@{|/board/${post.categoryID}/${post.postID}|}">
				
	                	<input type="hidden" th:value="${post.postID}">
	                	<input type="hidden" id="categoryID" th:value="${post.categoryID}" />
						<img th:if="${imageLinkEnd != null and 	imageLinkEnd.size() > index.index}" th:src="${imageLinkEnd[index.index]}" alt="이미지">
						<div th:text="${post.eventStart}"></div>
	                    <div class="title"><a th:href="@{|/board/${categoryID}/${post.postID}|}" th:text="${post.postName}"></a></div>
					</a>
                </div>   
                
            </div>
        </div>
    </section>

    <div class="empty"></div>

    <div th:replace="~{/Fragment/footer :: footerFragment}"></div>

	<script>
		$(document).ready(function () {
			// 검색 버튼 클릭 이벤트
			$('#search-btn').on('click', function (e) {
				e.preventDefault(); // 기본 동작 막기
				if (validateSearch()) { // 검색어 유효성 검사
					performSearch();
				}
			});

			// 검색어 입력 필드에서 엔터 키 이벤트
			$('#keyword').keypress(function (e) {
				if (e.which == 13) { // 눌린 키가 엔터 키인 경우
					e.preventDefault(); // 기본 동작 막기
					if (validateSearch()) { // 검색어 유효성 검사
						performSearch();
					}
				}
			});

			// 검색 실행 함수
			function performSearch() {
				var categoryID = $('#categoryID').val();
				var url = "/search";
				url = url + "?searchType=" + $('#searchType').val();
				url = url + "&keyword=" + $('#keyword').val();
				location.href = url;
			}

			// 검색어 유효성 검사 함수
			function validateSearch() {
				var keyword = document.getElementById("keyword").value.trim();
				if (keyword === "") {
					document.getElementById("searchError").style.display = "block";
					return false;
				} else {
					document.getElementById("searchError").style.display = "none";
					return true;
				}
			}
		});
	</script>
			
    <script th:src="@{/js/Main.js}"></script>
</body>

</html>