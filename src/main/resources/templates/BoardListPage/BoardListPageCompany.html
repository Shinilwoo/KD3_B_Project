<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BoardListPageCompany</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/Setting.css}">
  	<link rel="stylesheet" th:href="@{/css/BoardListPageCompany.css}">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <!-- header Start -->
	<div th:replace="~{/Fragment/header :: headerFragment}"></div>


    <!-- img slider start -->
    <section class="img-slider">
        <div class="slider">
            <div class="slides">
                <!-- radio btn start -->
                <input type="radio" name="radio-btn" id="radio1">
                <input type="radio" name="radio-btn" id="radio2">
                <input type="radio" name="radio-btn" id="radio3">
                <input type="radio" name="radio-btn" id="radio4">
                <input type="radio" name="radio-btn" id="radio5">
                <!-- radio btn end -->
                <!-- slide img start -->
                <div class="slide first">
                    <a href="#">
                        <img th:src="@{/images/headerSlideImgExam/header-img1.png}" alt="">
                    </a>
                </div>
              
                <div class="slide">
                    <a href="#">
                       <img th:src="@{/images/headerSlideImgExam/header-img2.png}" alt="">
                    </a>
                </div>
                <div class="slide">
                    <a href="#">
                        <img th:src="@{/images/headerSlideImgExam/header-img3.png}" alt="">
                    </a>
                </div>
                <div class="slide">
                    <a href="#">
                        <img th:src="@{/images/headerSlideImgExam/header-img4.png}" alt="">
                    </a>
                </div>
                <div class="slide">
                    <a href="#">
                        <img th:src="@{/images/headerSlideImgExam/header-img5.png}" alt="">
                    </a>
                </div>
                <!-- slide img end -->
            </div>
        </div>
    </section>
    

    <!-- tagAndContent Start-->
    <section class="tagAndContent">     

        <!-- content-list Start -->
        <div class="content-list">
            <div class="search-result">
			<div><span class="content-cnt" th:text="${posts.getTotalElements()}"></span><span>개의 행사가 검색되었습니다</span></div>
                <div class="list-btn">
	                    <a th:href="@{|/board/${categoryID}/search?order=visitCnt|}">추천순</a>
	                    <a th:href="@{|/board/${categoryID}/search?order=writeDate|}">최신순</a>
	                    <a th:href="@{|/board/${categoryID}/search?order=eventEnd|}">모집 마감일순</a>
                </div>
                
            </div>
    
            <div class="board-content">
				<div class="carousel-box" th:each="post, index: ${posts}">
                	<input type="hidden" th:value="${post.postID}">
                	<input type="hidden" id="categoryID" th:value="${categoryID}" />
                    <img th:src="${imageLinks[__${index.index}__]}">
                    <div th:text="${post.eventStart}"></div>
                    <div class="title"><a th:href="@{|/board/${categoryID}/${post.postID}|}" th:text="${post.postName}"></a></div>
            
                </div>            
            </div>
    
            <!-- write board btn -->
			<div class="write-btn">
                <a th:href="@{/board/register/new/1}">
                    <button>프로젝트 개설</button>
                </a>
            </div>

      <div class="pagination" th:if="${!posts.isEmpty()}">
                <ul class="pagination-ul">

					<li class="page-item" th:classappend="${!posts.hasPrevious} ? 'disabled'">
						<a class="page-link" th:href="@{|?page=${posts.number-1}|}">
						    <button class="btn1"><i class="fa-solid fa-angle-left"></i>이전</button>
						</a>
					</li>
					<li th:each="page: ${#numbers.sequence(0, posts.totalPages-1)}"
						th:if="${page >= posts.number-2 and page <= posts.number+2}"
						th:classappend="${page == posts.number} ? 'active'" 
						class="page-item" style="margin: 0 5px;">
						<a th:text="${page+1}" class="page-link" th:href="@{|?page=${page}|}"></a>
					</li>
					<li class="page-item" th:classappend="${!posts.hasNext} ? 'disabled'">
						<a class="page-link" th:href="@{|?page=${posts.number+1}|}">
							<button class="btn2">다음<i class="fa-solid fa-angle-right"></i></button>
						</a>
					</li>
                </ul>
                
            </div>
        </div>
        <!-- content-list End -->

    </section>
    <!-- tagAndContent End-->



    <!-- footer -->
	<div th:replace="~{/Fragment/footer :: footerFragment}"></div>

	<script>
				$(document).ready(function () {
					// 검색 버튼 클릭 이벤트
					$('#search-btn').on('click', function (e) {
						e.preventDefault(); // 기본 동작 막기
						if (validateSearch()) { // 검색어 유효성 검사
							performSearch();
						}
				    });
				
				    // 검색어 입력 필드에서 엔터 키 이벤트
				    $('#keyword').keypress(function(e) {
				        if(e.which == 13) { // 눌린 키가 엔터 키인 경우
				            e.preventDefault(); // 기본 동작 막기
							if (validateSearch()) { // 검색어 유효성 검사
								performSearch();
							}
				        }
				    });
				
				    // 검색 실행 함수
				    function performSearch() {
				        var categoryID = $('#categoryID').val();
				        var url = "/board/" + categoryID + "/search";
				        url = url + "?searchType=" + $('#searchType').val();
				        url = url + "&keyword=" + $('#keyword').val();
				        location.href = url;
				    }
					
					// 검색어 유효성 검사 함수
					function validateSearch() {
						var keyword = document.getElementById("keyword").value.trim();
						if (keyword === "") {
							document.getElementById("searchError").style.display = "block";
							return false;
						} else {
							document.getElementById("searchError").style.display = "none";
							return true;
						}
					}
				});
			</script>
			

    <script th:src="@{/js/BorderListPageCompany.js}"></script>
</body>
</html>